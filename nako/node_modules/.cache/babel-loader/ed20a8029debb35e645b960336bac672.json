{"ast":null,"code":"var _jsxFileName = \"/Users/mac/Desktop/Nako/nako/src/desktop/lobby/lobby.tsx\";\nimport React from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { CSSTransition } from \"react-transition-group\";\nimport { animate, delay } from \"../../utils\";\nimport styles from \"./lobby.module.scss\";\nimport NakoAPI, { parseMessage } from \"../../modules/websocket-messages\";\nimport Logo from \"../../modules/logo/logo\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar InputPhase;\n\n(function (InputPhase) {\n  InputPhase[InputPhase[\"Name\"] = 0] = \"Name\";\n  InputPhase[InputPhase[\"LobbyID\"] = 1] = \"LobbyID\";\n  InputPhase[InputPhase[\"Ended\"] = 2] = \"Ended\";\n})(InputPhase || (InputPhase = {}));\n\nvar ErrorMessage;\n\n(function (ErrorMessage) {\n  ErrorMessage[\"Generic\"] = \"An error occurred while your request was being processed.\";\n  ErrorMessage[\"TimedOut\"] = \"Your request was timed out. Please try again.\";\n  ErrorMessage[\"MissingLobby\"] = \"The provided lobby ID does not exist.\";\n})(ErrorMessage || (ErrorMessage = {}));\n\nclass Lobby extends React.Component {\n  constructor(props) {\n    super(props);\n    this.connection = void 0;\n    window.parseMessage = parseMessage;\n    this.state = {\n      name: \"\",\n      lobbyIDInput: \"\",\n      currentInput: InputPhase.Name,\n      inputParams: [{\n        className: \"box-shadow\",\n        type: \"text\",\n        placeholder: \"Enter name...\",\n        onChange: e => this.setState({\n          name: e.target.value\n        })\n      }, {\n        className: \"box-shadow hide-number-buttons\",\n        type: \"number\",\n        placeholder: \"Enter game ID\",\n        onChange: e => this.setState({\n          lobbyIDInput: e.target.value\n        })\n      }],\n      inputRef: /*#__PURE__*/React.createRef(),\n      inputTransitioning: false,\n      error: {\n        occurred: false,\n        message: ErrorMessage.Generic\n      },\n      transitionedToLobby: false\n    };\n    this.connection = new NakoAPI(this.props.socketURL, {\n      // Constructor is ran twice due to React.StrictMode, creating two connections.\n      onError: e => console.log(e) // This probably won't happen in production if the documentations are right.\n\n    }); // WebSocket server should disconnect the unused connection due to keep alive timeout anyway.\n\n    this.connection.subscribe(\"req\", \"keep_alive\", () => this.connection.send({\n      method: \"res\",\n      type: \"keep_alive\",\n      payload: {\n        name: this.state.name,\n        lobbyID: this.state.lobbyInfo.id\n      }\n    })); // this.connection = new WebSocket(this.props.socketURL);\n    // this.connection.onopen = () => {\n    //   console.log(this.connection);\n    //   console.log(\"Connected\");\n    // }\n    // this.connection.onmessage = e => {\n    //   try {\n    //     console.log(JSON.parse(e.data));\n    //   } catch (error) {\n    //     console.log(e.data);\n    //   }\n    //   const msg = parseMessage(e.data);\n    //   if (msg !== undefined) {\n    //     if (msg.method === \"req\") {\n    //       let res: WebSocketResponse | Error;\n    //       switch (msg.type) {\n    //         case \"keep_alive\":\n    //           res = { name: this.state.name, lobbyID: this.state.lobbyInfo!.id } as KeepAliveResponse\n    //           break;\n    //         default:\n    //           res = new Error(`Unsupported request type: ${msg.type}`);\n    //           this.setState({ errorOccured: true });\n    //       }\n    //       if (res instanceof Error) {\n    //         console.log(res, msg);\n    //       } else {\n    //         this.connection.send(JSON.stringify(res));\n    //       }\n    //     } else if (msg.method === \"res\") {\n    //       switch (msg.type) {\n    //         case \"lobby_join\": {\n    //           const res = e.data as LobbyJoinResponse;\n    //           if (res.lobbyInfo) {\n    //             this.setState({ lobbyInfo: res.lobbyInfo })\n    //           } else {\n    //             this.lobbyNotFoundHandler(res.error!);\n    //           }\n    //           break;\n    //         }\n    //         case \"lobby_leave\": {\n    //           const res = e.data as LobbyLeaveResponse;\n    //           if (res.lobbyInfo && !res.lobbyInfo.players.includes(this.state.name)) {\n    //             this.setState({ lobbyInfo: undefined });\n    //           } else {\n    //             console.log(res.error);\n    //           }\n    //           break;\n    //         }\n    //         case \"lobby_update\": {\n    //           const res = e.data as LobbyUpdateResponse;\n    //           this.setState({ lobbyInfo: res.lobbyInfo });\n    //           break;\n    //         }\n    //         default: {\n    //           console.log(`Unsupported response type: ${msg.type}`);\n    //           this.setState({ errorOccured: true });\n    //         }\n    //       }\n    //     }\n    //   } else {\n    //     console.log(\"Invalid message:\");\n    //     console.log(e.data);\n    //     this.setState({ errorOccured: true });\n    //   }\n    // }\n    // this.connection.onerror = e => {\n    //   console.log(e);\n    // }\n  }\n\n  componentWillUnmount() {\n    this.connection.close();\n  }\n\n  lobbyNotFoundHandler(error) {\n    console.log(error);\n  }\n\n  async onFormSubmitHandler(e, ms) {\n    e.preventDefault();\n    this.setState({\n      error: { ...this.state.error,\n        occurred: false\n      }\n    });\n\n    const triggerNextInputPhase = () => {\n      if (this.state.currentInput < InputPhase.Ended) {\n        this.setState({\n          currentInput: this.state.currentInput + 1\n        });\n      }\n    };\n\n    const reject = () => {\n      animate(\"shake\", this.state.inputRef.current, 500);\n    };\n\n    const triggerDelay = async () => {\n      if (ms) {\n        console.log(true);\n        this.setState({\n          inputTransitioning: true\n        });\n        await delay(ms);\n        console.log(false);\n        this.setState({\n          inputTransitioning: false\n        });\n      }\n    };\n\n    switch (this.state.currentInput) {\n      case InputPhase.Name:\n        if (this.state.name !== \"\") {\n          await triggerDelay();\n          triggerNextInputPhase();\n        } else {\n          reject();\n        }\n\n        break;\n\n      case InputPhase.LobbyID:\n        if (this.state.lobbyIDInput !== \"\") {\n          this.connection.send({\n            method: \"req\",\n            type: \"lobby_join\",\n            payload: {\n              lobbyID: Number(this.state.lobbyIDInput),\n              name: this.state.name\n            }\n          }, 10000).then(async res => {\n            if (res) {\n              if (res.lobbyInfo) {\n                this.setState({\n                  lobbyInfo: res.lobbyInfo\n                });\n                await triggerDelay();\n                triggerNextInputPhase();\n              } else {\n                this.setState({\n                  error: {\n                    occurred: true,\n                    message: ErrorMessage.MissingLobby\n                  }\n                });\n                console.log(res.error);\n              }\n            } else {\n              this.setState({\n                error: {\n                  occurred: true,\n                  message: ErrorMessage.TimedOut\n                }\n              });\n            }\n          });\n        } else {\n          reject();\n        }\n\n        break;\n\n      default:\n        break;\n    }\n  }\n\n  render() {\n    const {\n      socketURL,\n      ...rest\n    } = this.props;\n    return /*#__PURE__*/_jsxDEV(\"div\", { ...rest,\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: styles[\"lobby-container\"],\n        children: [/*#__PURE__*/_jsxDEV(Link, {\n          to: \"/\",\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            id: styles.back,\n            className: \"box-shadow\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: styles[\"arrow-left\"]\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 288,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: \"Back\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 289,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 287,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 286,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          style: {\n            position: \"absolute\",\n            zIndex: 1,\n            bottom: 0,\n            right: 0,\n            color: \"white\"\n          },\n          onClick: () => this.setState({\n            lobbyInfo: this.state.lobbyInfo ? undefined : {\n              id: 0,\n              players: [this.state.name, \"Test1\", \"Test2\", \"Test3\", \"Test4\", \"Test5\", \"Test6\", \"Test7\", \"Test8\", \"Test9\", \"Test10\", \"Test11\", \"Test12\"]\n            }\n          }),\n          children: \"Test\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 292,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(CSSTransition, {\n          in: this.state.lobbyInfo !== undefined,\n          timeout: 500,\n          classNames: {\n            enter: styles[\"background-top-enter\"],\n            enterActive: styles[\"background-top-enter-active\"],\n            enterDone: styles[\"background-top-enter-done\"],\n            exit: styles[\"background-top-exit\"],\n            exitActive: styles[\"background-top-exit-active\"],\n            exitDone: styles[\"background-top-exit-done\"]\n          },\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            id: this.state.transitionedToLobby ? styles.background : styles[\"background-top\"],\n            children: [/*#__PURE__*/_jsxDEV(CSSTransition, {\n              in: this.state.lobbyInfo === undefined,\n              timeout: 500,\n              classNames: {\n                enter: styles[\"title-container-enter\"],\n                enterActive: styles[\"title-container-enter-active\"],\n                enterDone: styles[\"title-container-enter-done\"],\n                exit: styles[\"title-container-exit\"],\n                exitActive: styles[\"title-container-exit-active\"],\n                exitDone: styles[\"title-container-exit-done\"]\n              },\n              onExited: () => this.setState({\n                transitionedToLobby: true\n              }),\n              mountOnEnter: true,\n              unmountOnExit: true,\n              children: /*#__PURE__*/_jsxDEV(Logo, {\n                id: styles[\"title-container\"],\n                role: \"student\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 365,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 346,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(CSSTransition, {\n              in: this.state.transitionedToLobby && this.state.lobbyInfo !== undefined,\n              timeout: 500,\n              classNames: {\n                enter: styles[\"player-list-container-enter\"],\n                enterActive: styles[\"player-list-container-enter-active\"],\n                enterDone: styles[\"player-list-container-enter-done\"],\n                exit: styles[\"player-list-container-exit\"],\n                exitActive: styles[\"player-list-container-exit-active\"],\n                exitDone: styles[\"player-list-container-exit-done\"]\n              },\n              onExit: () => this.setState({\n                transitionedToLobby: false\n              }),\n              mountOnEnter: true,\n              unmountOnExit: true,\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                id: styles[\"player-list-container\"],\n                children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                  children: \"You are playing with:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 386,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  id: styles[\"player-list\"],\n                  children: this.state.lobbyInfo !== undefined ? this.state.lobbyInfo.players.map((player, i) => /*#__PURE__*/_jsxDEV(\"p\", {\n                    children: player\n                  }, i, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 390,\n                    columnNumber: 27\n                  }, this)) : null\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 387,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 385,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 367,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 339,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 327,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(CSSTransition, {\n          in: this.state.lobbyInfo === undefined,\n          timeout: 500,\n          classNames: {\n            enter: styles[\"background-bottom-enter\"],\n            enterActive: styles[\"background-bottom-enter-active\"],\n            enterDone: styles[\"background-bottom-enter-done\"],\n            exit: styles[\"background-bottom-exit\"],\n            exitActive: styles[\"background-bottom-exit-active\"],\n            exitDone: styles[\"background-bottom-exit-done\"]\n          },\n          unmountOnExit: true,\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            id: styles[\"background-bottom\"],\n            className: \"box-shadow-inner\",\n            children: /*#__PURE__*/_jsxDEV(\"form\", {\n              id: styles[\"input-container\"],\n              onSubmit: e => this.onFormSubmitHandler(e, 600),\n              children: [/*#__PURE__*/_jsxDEV(CSSTransition, {\n                in: !this.state.inputTransitioning,\n                timeout: 500,\n                classNames: \"fade-rtl\",\n                children: /*#__PURE__*/_jsxDEV(\"input\", {\n                  ref: this.state.inputRef,\n                  id: styles.input,\n                  ...this.state.inputParams[this.state.currentInput]\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 421,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 416,\n                columnNumber: 17\n              }, this), this.state.error.occurred ? /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"error\",\n                children: this.state.error.message\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 428,\n                columnNumber: 19\n              }, this) : null, /*#__PURE__*/_jsxDEV(\"button\", {\n                id: styles.submit,\n                className: \"box-shadow\",\n                type: \"submit\",\n                children: \"Enter\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 430,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 412,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 411,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 398,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 285,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 284,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nLobby.defaultProps = {\n  socketURL: \"ws://localhost:1880\"\n};\nexport default Lobby;","map":{"version":3,"sources":["/Users/mac/Desktop/Nako/nako/src/desktop/lobby/lobby.tsx"],"names":["React","Link","CSSTransition","animate","delay","styles","NakoAPI","parseMessage","Logo","InputPhase","ErrorMessage","Lobby","Component","constructor","props","connection","window","state","name","lobbyIDInput","currentInput","Name","inputParams","className","type","placeholder","onChange","e","setState","target","value","inputRef","createRef","inputTransitioning","error","occurred","message","Generic","transitionedToLobby","socketURL","onError","console","log","subscribe","send","method","payload","lobbyID","lobbyInfo","id","componentWillUnmount","close","lobbyNotFoundHandler","onFormSubmitHandler","ms","preventDefault","triggerNextInputPhase","Ended","reject","current","triggerDelay","LobbyID","Number","then","res","MissingLobby","TimedOut","render","rest","back","position","zIndex","bottom","right","color","undefined","players","enter","enterActive","enterDone","exit","exitActive","exitDone","background","map","player","i","input","submit","defaultProps"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,IAAT,QAAqB,kBAArB;AACA,SAASC,aAAT,QAA8B,wBAA9B;AACA,SAASC,OAAT,EAAkBC,KAAlB,QAA+B,aAA/B;AACA,OAAOC,MAAP,MAAmB,qBAAnB;AACA,OAAOC,OAAP,IAEEC,YAFF,QAGO,kCAHP;AAIA,OAAOC,IAAP,MAAiB,yBAAjB;;IAEKC,U;;WAAAA,U;AAAAA,EAAAA,U,CAAAA,U;AAAAA,EAAAA,U,CAAAA,U;AAAAA,EAAAA,U,CAAAA,U;GAAAA,U,KAAAA,U;;IAMAC,Y;;WAAAA,Y;AAAAA,EAAAA,Y;AAAAA,EAAAA,Y;AAAAA,EAAAA,Y;GAAAA,Y,KAAAA,Y;;AAyBL,MAAMC,KAAN,SAAoBX,KAAK,CAACY,SAA1B,CAGE;AAOAC,EAAAA,WAAW,CAACC,KAAD,EAA2D;AACpE,UAAMA,KAAN;AADoE,SAFtEC,UAEsE;AAGnEC,IAAAA,MAAD,CAAgBT,YAAhB,GAA+BA,YAA/B;AAEA,SAAKU,KAAL,GAAa;AACXC,MAAAA,IAAI,EAAE,EADK;AAEXC,MAAAA,YAAY,EAAE,EAFH;AAGXC,MAAAA,YAAY,EAAEX,UAAU,CAACY,IAHd;AAIXC,MAAAA,WAAW,EAAE,CACX;AACEC,QAAAA,SAAS,EAAE,YADb;AAEEC,QAAAA,IAAI,EAAE,MAFR;AAGEC,QAAAA,WAAW,EAAE,eAHf;AAIEC,QAAAA,QAAQ,EAAGC,CAAD,IAAO,KAAKC,QAAL,CAAc;AAAEV,UAAAA,IAAI,EAAES,CAAC,CAACE,MAAF,CAASC;AAAjB,SAAd;AAJnB,OADW,EAOX;AACEP,QAAAA,SAAS,EAAE,gCADb;AAEEC,QAAAA,IAAI,EAAE,QAFR;AAGEC,QAAAA,WAAW,EAAE,eAHf;AAIEC,QAAAA,QAAQ,EAAGC,CAAD,IAAO,KAAKC,QAAL,CAAc;AAAET,UAAAA,YAAY,EAAEQ,CAAC,CAACE,MAAF,CAASC;AAAzB,SAAd;AAJnB,OAPW,CAJF;AAkBXC,MAAAA,QAAQ,eAAE/B,KAAK,CAACgC,SAAN,EAlBC;AAmBXC,MAAAA,kBAAkB,EAAE,KAnBT;AAoBXC,MAAAA,KAAK,EAAE;AACLC,QAAAA,QAAQ,EAAE,KADL;AAELC,QAAAA,OAAO,EAAE1B,YAAY,CAAC2B;AAFjB,OApBI;AAwBXC,MAAAA,mBAAmB,EAAE;AAxBV,KAAb;AA2BA,SAAKvB,UAAL,GAAkB,IAAIT,OAAJ,CAAY,KAAKQ,KAAL,CAAWyB,SAAvB,EAAkC;AAClD;AACAC,MAAAA,OAAO,EAAGb,CAAD,IAAOc,OAAO,CAACC,GAAR,CAAYf,CAAZ,CAFkC,CAElB;;AAFkB,KAAlC,CAAlB,CAhCoE,CAmChE;;AAEJ,SAAKZ,UAAL,CAAgB4B,SAAhB,CAA+C,KAA/C,EAAsD,YAAtD,EAAoE,MAClE,KAAK5B,UAAL,CAAgB6B,IAAhB,CAA0C;AACxCC,MAAAA,MAAM,EAAE,KADgC;AAExCrB,MAAAA,IAAI,EAAE,YAFkC;AAGxCsB,MAAAA,OAAO,EAAE;AACP5B,QAAAA,IAAI,EAAE,KAAKD,KAAL,CAAWC,IADV;AAEP6B,QAAAA,OAAO,EAAE,KAAK9B,KAAL,CAAW+B,SAAX,CAAsBC;AAFxB;AAH+B,KAA1C,CADF,EArCoE,CAgDpE;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAEA;AAEA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AAEA;AACA;AAEA;AACA;AAEA;AACA;AACA;AACA;AACA;AAEA;AACA;AAEA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACD;;AAEDC,EAAAA,oBAAoB,GAAG;AACrB,SAAKnC,UAAL,CAAgBoC,KAAhB;AACD;;AAEDC,EAAAA,oBAAoB,CAAClB,KAAD,EAAgB;AAClCO,IAAAA,OAAO,CAACC,GAAR,CAAYR,KAAZ;AACD;;AAEwB,QAAnBmB,mBAAmB,CAAC1B,CAAD,EAAsC2B,EAAtC,EAAmD;AAC1E3B,IAAAA,CAAC,CAAC4B,cAAF;AACA,SAAK3B,QAAL,CAAc;AAAEM,MAAAA,KAAK,EAAE,EAAE,GAAG,KAAKjB,KAAL,CAAWiB,KAAhB;AAAuBC,QAAAA,QAAQ,EAAE;AAAjC;AAAT,KAAd;;AAEA,UAAMqB,qBAAqB,GAAG,MAAM;AAClC,UAAI,KAAKvC,KAAL,CAAWG,YAAX,GAA0BX,UAAU,CAACgD,KAAzC,EAAgD;AAC9C,aAAK7B,QAAL,CAAc;AAAER,UAAAA,YAAY,EAAE,KAAKH,KAAL,CAAWG,YAAX,GAA0B;AAA1C,SAAd;AACD;AACF,KAJD;;AAMA,UAAMsC,MAAM,GAAG,MAAM;AACnBvD,MAAAA,OAAO,CAAC,OAAD,EAAU,KAAKc,KAAL,CAAWc,QAAX,CAAoB4B,OAA9B,EAAwC,GAAxC,CAAP;AACD,KAFD;;AAIA,UAAMC,YAAY,GAAG,YAAY;AAC/B,UAAIN,EAAJ,EAAQ;AACNb,QAAAA,OAAO,CAACC,GAAR,CAAY,IAAZ;AACA,aAAKd,QAAL,CAAc;AACZK,UAAAA,kBAAkB,EAAE;AADR,SAAd;AAIA,cAAM7B,KAAK,CAACkD,EAAD,CAAX;AAEAb,QAAAA,OAAO,CAACC,GAAR,CAAY,KAAZ;AACA,aAAKd,QAAL,CAAc;AACZK,UAAAA,kBAAkB,EAAE;AADR,SAAd;AAGD;AACF,KAdD;;AAgBA,YAAQ,KAAKhB,KAAL,CAAWG,YAAnB;AACE,WAAKX,UAAU,CAACY,IAAhB;AACE,YAAI,KAAKJ,KAAL,CAAWC,IAAX,KAAoB,EAAxB,EAA4B;AAC1B,gBAAM0C,YAAY,EAAlB;AACAJ,UAAAA,qBAAqB;AACtB,SAHD,MAGO;AACLE,UAAAA,MAAM;AACP;;AAED;;AAEF,WAAKjD,UAAU,CAACoD,OAAhB;AACE,YAAI,KAAK5C,KAAL,CAAWE,YAAX,KAA4B,EAAhC,EAAoC;AAClC,eAAKJ,UAAL,CACG6B,IADH,CAEI;AACEC,YAAAA,MAAM,EAAE,KADV;AAEErB,YAAAA,IAAI,EAAE,YAFR;AAGEsB,YAAAA,OAAO,EAAE;AACPC,cAAAA,OAAO,EAAEe,MAAM,CAAC,KAAK7C,KAAL,CAAWE,YAAZ,CADR;AAEPD,cAAAA,IAAI,EAAE,KAAKD,KAAL,CAAWC;AAFV;AAHX,WAFJ,EAUI,KAVJ,EAYG6C,IAZH,CAYQ,MAAOC,GAAP,IAAe;AACnB,gBAAIA,GAAJ,EAAS;AACP,kBAAIA,GAAG,CAAChB,SAAR,EAAmB;AACjB,qBAAKpB,QAAL,CAAc;AAAEoB,kBAAAA,SAAS,EAAEgB,GAAG,CAAChB;AAAjB,iBAAd;AACA,sBAAMY,YAAY,EAAlB;AACAJ,gBAAAA,qBAAqB;AACtB,eAJD,MAIO;AACL,qBAAK5B,QAAL,CAAc;AACZM,kBAAAA,KAAK,EAAE;AACLC,oBAAAA,QAAQ,EAAE,IADL;AAELC,oBAAAA,OAAO,EAAE1B,YAAY,CAACuD;AAFjB;AADK,iBAAd;AAMAxB,gBAAAA,OAAO,CAACC,GAAR,CAAYsB,GAAG,CAAC9B,KAAhB;AACD;AACF,aAdD,MAcO;AACL,mBAAKN,QAAL,CAAc;AACZM,gBAAAA,KAAK,EAAE;AAAEC,kBAAAA,QAAQ,EAAE,IAAZ;AAAkBC,kBAAAA,OAAO,EAAE1B,YAAY,CAACwD;AAAxC;AADK,eAAd;AAGD;AACF,WAhCH;AAiCD,SAlCD,MAkCO;AACLR,UAAAA,MAAM;AACP;;AACD;;AAEF;AACE;AApDJ;AAsDD;;AAEDS,EAAAA,MAAM,GAAG;AACP,UAAM;AAAE5B,MAAAA,SAAF;AAAa,SAAG6B;AAAhB,QAAyB,KAAKtD,KAApC;AAEA,wBACE,oBAASsD,IAAT;AAAA,6BACE;AAAK,QAAA,SAAS,EAAE/D,MAAM,CAAC,iBAAD,CAAtB;AAAA,gCACE,QAAC,IAAD;AAAM,UAAA,EAAE,EAAC,GAAT;AAAA,iCACE;AAAQ,YAAA,EAAE,EAAEA,MAAM,CAACgE,IAAnB;AAAyB,YAAA,SAAS,EAAC,YAAnC;AAAA,oCACE;AAAM,cAAA,SAAS,EAAEhE,MAAM,CAAC,YAAD;AAAvB;AAAA;AAAA;AAAA;AAAA,oBADF,eAEE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAFF;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,gBADF,eAOE;AACE,UAAA,KAAK,EAAE;AACLiE,YAAAA,QAAQ,EAAE,UADL;AAELC,YAAAA,MAAM,EAAE,CAFH;AAGLC,YAAAA,MAAM,EAAE,CAHH;AAILC,YAAAA,KAAK,EAAE,CAJF;AAKLC,YAAAA,KAAK,EAAE;AALF,WADT;AAQE,UAAA,OAAO,EAAE,MACP,KAAK9C,QAAL,CAAc;AACZoB,YAAAA,SAAS,EAAE,KAAK/B,KAAL,CAAW+B,SAAX,GACP2B,SADO,GAEP;AACE1B,cAAAA,EAAE,EAAE,CADN;AAEE2B,cAAAA,OAAO,EAAE,CACP,KAAK3D,KAAL,CAAWC,IADJ,EAEP,OAFO,EAGP,OAHO,EAIP,OAJO,EAKP,OALO,EAMP,OANO,EAOP,OAPO,EAQP,OARO,EASP,OATO,EAUP,OAVO,EAWP,QAXO,EAYP,QAZO,EAaP,QAbO;AAFX;AAHQ,WAAd,CATJ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAPF,eA0CE,QAAC,aAAD;AACE,UAAA,EAAE,EAAE,KAAKD,KAAL,CAAW+B,SAAX,KAAyB2B,SAD/B;AAEE,UAAA,OAAO,EAAE,GAFX;AAGE,UAAA,UAAU,EAAE;AACVE,YAAAA,KAAK,EAAExE,MAAM,CAAC,sBAAD,CADH;AAEVyE,YAAAA,WAAW,EAAEzE,MAAM,CAAC,6BAAD,CAFT;AAGV0E,YAAAA,SAAS,EAAE1E,MAAM,CAAC,2BAAD,CAHP;AAIV2E,YAAAA,IAAI,EAAE3E,MAAM,CAAC,qBAAD,CAJF;AAKV4E,YAAAA,UAAU,EAAE5E,MAAM,CAAC,4BAAD,CALR;AAMV6E,YAAAA,QAAQ,EAAE7E,MAAM,CAAC,0BAAD;AANN,WAHd;AAAA,iCAYE;AACE,YAAA,EAAE,EACA,KAAKY,KAAL,CAAWqB,mBAAX,GACIjC,MAAM,CAAC8E,UADX,GAEI9E,MAAM,CAAC,gBAAD,CAJd;AAAA,oCAOE,QAAC,aAAD;AACE,cAAA,EAAE,EAAE,KAAKY,KAAL,CAAW+B,SAAX,KAAyB2B,SAD/B;AAEE,cAAA,OAAO,EAAE,GAFX;AAGE,cAAA,UAAU,EAAE;AACVE,gBAAAA,KAAK,EAAExE,MAAM,CAAC,uBAAD,CADH;AAEVyE,gBAAAA,WAAW,EAAEzE,MAAM,CAAC,8BAAD,CAFT;AAGV0E,gBAAAA,SAAS,EAAE1E,MAAM,CAAC,4BAAD,CAHP;AAIV2E,gBAAAA,IAAI,EAAE3E,MAAM,CAAC,sBAAD,CAJF;AAKV4E,gBAAAA,UAAU,EAAE5E,MAAM,CAAC,6BAAD,CALR;AAMV6E,gBAAAA,QAAQ,EAAE7E,MAAM,CAAC,2BAAD;AANN,eAHd;AAWE,cAAA,QAAQ,EAAE,MAAM,KAAKuB,QAAL,CAAc;AAAEU,gBAAAA,mBAAmB,EAAE;AAAvB,eAAd,CAXlB;AAYE,cAAA,YAAY,MAZd;AAaE,cAAA,aAAa,MAbf;AAAA,qCAmBE,QAAC,IAAD;AAAM,gBAAA,EAAE,EAAEjC,MAAM,CAAC,iBAAD,CAAhB;AAAqC,gBAAA,IAAI,EAAC;AAA1C;AAAA;AAAA;AAAA;AAAA;AAnBF;AAAA;AAAA;AAAA;AAAA,oBAPF,eA4BE,QAAC,aAAD;AACE,cAAA,EAAE,EACA,KAAKY,KAAL,CAAWqB,mBAAX,IACA,KAAKrB,KAAL,CAAW+B,SAAX,KAAyB2B,SAH7B;AAKE,cAAA,OAAO,EAAE,GALX;AAME,cAAA,UAAU,EAAE;AACVE,gBAAAA,KAAK,EAAExE,MAAM,CAAC,6BAAD,CADH;AAEVyE,gBAAAA,WAAW,EAAEzE,MAAM,CAAC,oCAAD,CAFT;AAGV0E,gBAAAA,SAAS,EAAE1E,MAAM,CAAC,kCAAD,CAHP;AAIV2E,gBAAAA,IAAI,EAAE3E,MAAM,CAAC,4BAAD,CAJF;AAKV4E,gBAAAA,UAAU,EAAE5E,MAAM,CAAC,mCAAD,CALR;AAMV6E,gBAAAA,QAAQ,EAAE7E,MAAM,CAAC,iCAAD;AANN,eANd;AAcE,cAAA,MAAM,EAAE,MAAM,KAAKuB,QAAL,CAAc;AAAEU,gBAAAA,mBAAmB,EAAE;AAAvB,eAAd,CAdhB;AAeE,cAAA,YAAY,MAfd;AAgBE,cAAA,aAAa,MAhBf;AAAA,qCAkBE;AAAK,gBAAA,EAAE,EAAEjC,MAAM,CAAC,uBAAD,CAAf;AAAA,wCACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBADF,eAEE;AAAK,kBAAA,EAAE,EAAEA,MAAM,CAAC,aAAD,CAAf;AAAA,4BACG,KAAKY,KAAL,CAAW+B,SAAX,KAAyB2B,SAAzB,GACG,KAAK1D,KAAL,CAAW+B,SAAX,CAAsB4B,OAAtB,CAA8BQ,GAA9B,CAAkC,CAACC,MAAD,EAASC,CAAT,kBAChC;AAAA,8BAAYD;AAAZ,qBAAQC,CAAR;AAAA;AAAA;AAAA;AAAA,0BADF,CADH,GAIG;AALN;AAAA;AAAA;AAAA;AAAA,wBAFF;AAAA;AAAA;AAAA;AAAA;AAAA;AAlBF;AAAA;AAAA;AAAA;AAAA,oBA5BF;AAAA;AAAA;AAAA;AAAA;AAAA;AAZF;AAAA;AAAA;AAAA;AAAA,gBA1CF,eAiHE,QAAC,aAAD;AACE,UAAA,EAAE,EAAE,KAAKrE,KAAL,CAAW+B,SAAX,KAAyB2B,SAD/B;AAEE,UAAA,OAAO,EAAE,GAFX;AAGE,UAAA,UAAU,EAAE;AACVE,YAAAA,KAAK,EAAExE,MAAM,CAAC,yBAAD,CADH;AAEVyE,YAAAA,WAAW,EAAEzE,MAAM,CAAC,gCAAD,CAFT;AAGV0E,YAAAA,SAAS,EAAE1E,MAAM,CAAC,8BAAD,CAHP;AAIV2E,YAAAA,IAAI,EAAE3E,MAAM,CAAC,wBAAD,CAJF;AAKV4E,YAAAA,UAAU,EAAE5E,MAAM,CAAC,+BAAD,CALR;AAMV6E,YAAAA,QAAQ,EAAE7E,MAAM,CAAC,6BAAD;AANN,WAHd;AAWE,UAAA,aAAa,MAXf;AAAA,iCAaE;AAAK,YAAA,EAAE,EAAEA,MAAM,CAAC,mBAAD,CAAf;AAAsC,YAAA,SAAS,EAAC,kBAAhD;AAAA,mCACE;AACE,cAAA,EAAE,EAAEA,MAAM,CAAC,iBAAD,CADZ;AAEE,cAAA,QAAQ,EAAGsB,CAAD,IAAO,KAAK0B,mBAAL,CAAyB1B,CAAzB,EAA4B,GAA5B,CAFnB;AAAA,sCAIE,QAAC,aAAD;AACE,gBAAA,EAAE,EAAE,CAAC,KAAKV,KAAL,CAAWgB,kBADlB;AAEE,gBAAA,OAAO,EAAE,GAFX;AAGE,gBAAA,UAAU,EAAC,UAHb;AAAA,uCAKE;AACE,kBAAA,GAAG,EAAE,KAAKhB,KAAL,CAAWc,QADlB;AAEE,kBAAA,EAAE,EAAE1B,MAAM,CAACkF,KAFb;AAAA,qBAGM,KAAKtE,KAAL,CAAWK,WAAX,CAAuB,KAAKL,KAAL,CAAWG,YAAlC;AAHN;AAAA;AAAA;AAAA;AAAA;AALF;AAAA;AAAA;AAAA;AAAA,sBAJF,EAeG,KAAKH,KAAL,CAAWiB,KAAX,CAAiBC,QAAjB,gBACC;AAAG,gBAAA,SAAS,EAAC,OAAb;AAAA,0BAAsB,KAAKlB,KAAL,CAAWiB,KAAX,CAAiBE;AAAvC;AAAA;AAAA;AAAA;AAAA,sBADD,GAEG,IAjBN,eAkBE;AAAQ,gBAAA,EAAE,EAAE/B,MAAM,CAACmF,MAAnB;AAA2B,gBAAA,SAAS,EAAC,YAArC;AAAkD,gBAAA,IAAI,EAAC,QAAvD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAlBF;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA;AAbF;AAAA;AAAA;AAAA;AAAA,gBAjHF;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,YADF;AA4JD;;AAzYD;;AAHI7E,K,CAIG8E,Y,GAAe;AACpBlD,EAAAA,SAAS,EAAE;AADS,C;AA2YxB,eAAe5B,KAAf","sourcesContent":["import React from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { CSSTransition } from \"react-transition-group\";\nimport { animate, delay } from \"../../utils\";\nimport styles from \"./lobby.module.scss\";\nimport NakoAPI, {\n  LobbyInfo,\n  parseMessage,\n} from \"../../modules/websocket-messages\";\nimport Logo from \"../../modules/logo/logo\";\n\nenum InputPhase {\n  Name,\n  LobbyID,\n  Ended,\n}\n\nenum ErrorMessage {\n  Generic = \"An error occurred while your request was being processed.\",\n  TimedOut = \"Your request was timed out. Please try again.\",\n  MissingLobby = \"The provided lobby ID does not exist.\",\n}\n\ninterface LobbyProps {\n  socketURL: string;\n}\n\ninterface LobbyStates {\n  name: string;\n  lobbyIDInput: string;\n  currentInput: InputPhase;\n  inputParams: React.InputHTMLAttributes<HTMLInputElement>[];\n  inputRef: React.RefObject<HTMLInputElement>;\n  inputTransitioning: boolean;\n  error: {\n    occurred: boolean;\n    message: ErrorMessage;\n  };\n  transitionedToLobby: boolean;\n  lobbyInfo?: LobbyInfo;\n}\n\nclass Lobby extends React.Component<\n  LobbyProps & React.HTMLAttributes<HTMLDivElement>,\n  LobbyStates\n> {\n  static defaultProps = {\n    socketURL: \"ws://localhost:1880\",\n  };\n\n  connection: NakoAPI;\n\n  constructor(props: LobbyProps & React.HTMLAttributes<HTMLDivElement>) {\n    super(props);\n\n    (window as any).parseMessage = parseMessage;\n\n    this.state = {\n      name: \"\",\n      lobbyIDInput: \"\",\n      currentInput: InputPhase.Name,\n      inputParams: [\n        {\n          className: \"box-shadow\",\n          type: \"text\",\n          placeholder: \"Enter name...\",\n          onChange: (e) => this.setState({ name: e.target.value }),\n        },\n        {\n          className: \"box-shadow hide-number-buttons\",\n          type: \"number\",\n          placeholder: \"Enter game ID\",\n          onChange: (e) => this.setState({ lobbyIDInput: e.target.value }),\n        },\n      ],\n      inputRef: React.createRef<HTMLInputElement>(),\n      inputTransitioning: false,\n      error: {\n        occurred: false,\n        message: ErrorMessage.Generic,\n      },\n      transitionedToLobby: false,\n    };\n\n    this.connection = new NakoAPI(this.props.socketURL, {\n      // Constructor is ran twice due to React.StrictMode, creating two connections.\n      onError: (e) => console.log(e), // This probably won't happen in production if the documentations are right.\n    }); // WebSocket server should disconnect the unused connection due to keep alive timeout anyway.\n\n    this.connection.subscribe<\"req\", \"keep_alive\">(\"req\", \"keep_alive\", () =>\n      this.connection.send<\"res\", \"keep_alive\">({\n        method: \"res\",\n        type: \"keep_alive\",\n        payload: {\n          name: this.state.name,\n          lobbyID: this.state.lobbyInfo!.id,\n        },\n      })\n    );\n\n    // this.connection = new WebSocket(this.props.socketURL);\n    // this.connection.onopen = () => {\n    //   console.log(this.connection);\n    //   console.log(\"Connected\");\n    // }\n\n    // this.connection.onmessage = e => {\n    //   try {\n    //     console.log(JSON.parse(e.data));\n    //   } catch (error) {\n    //     console.log(e.data);\n    //   }\n\n    //   const msg = parseMessage(e.data);\n\n    //   if (msg !== undefined) {\n    //     if (msg.method === \"req\") {\n    //       let res: WebSocketResponse | Error;\n\n    //       switch (msg.type) {\n    //         case \"keep_alive\":\n    //           res = { name: this.state.name, lobbyID: this.state.lobbyInfo!.id } as KeepAliveResponse\n    //           break;\n\n    //         default:\n    //           res = new Error(`Unsupported request type: ${msg.type}`);\n    //           this.setState({ errorOccured: true });\n    //       }\n\n    //       if (res instanceof Error) {\n    //         console.log(res, msg);\n    //       } else {\n    //         this.connection.send(JSON.stringify(res));\n    //       }\n\n    //     } else if (msg.method === \"res\") {\n    //       switch (msg.type) {\n    //         case \"lobby_join\": {\n    //           const res = e.data as LobbyJoinResponse;\n\n    //           if (res.lobbyInfo) {\n    //             this.setState({ lobbyInfo: res.lobbyInfo })\n    //           } else {\n    //             this.lobbyNotFoundHandler(res.error!);\n    //           }\n\n    //           break;\n    //         }\n\n    //         case \"lobby_leave\": {\n    //           const res = e.data as LobbyLeaveResponse;\n\n    //           if (res.lobbyInfo && !res.lobbyInfo.players.includes(this.state.name)) {\n    //             this.setState({ lobbyInfo: undefined });\n    //           } else {\n    //             console.log(res.error);\n    //           }\n\n    //           break;\n    //         }\n\n    //         case \"lobby_update\": {\n    //           const res = e.data as LobbyUpdateResponse;\n    //           this.setState({ lobbyInfo: res.lobbyInfo });\n    //           break;\n    //         }\n\n    //         default: {\n    //           console.log(`Unsupported response type: ${msg.type}`);\n    //           this.setState({ errorOccured: true });\n    //         }\n    //       }\n    //     }\n    //   } else {\n    //     console.log(\"Invalid message:\");\n    //     console.log(e.data);\n    //     this.setState({ errorOccured: true });\n    //   }\n    // }\n\n    // this.connection.onerror = e => {\n    //   console.log(e);\n    // }\n  }\n\n  componentWillUnmount() {\n    this.connection.close();\n  }\n\n  lobbyNotFoundHandler(error: string) {\n    console.log(error);\n  }\n\n  async onFormSubmitHandler(e: React.FormEvent<HTMLFormElement>, ms?: number) {\n    e.preventDefault();\n    this.setState({ error: { ...this.state.error, occurred: false } });\n\n    const triggerNextInputPhase = () => {\n      if (this.state.currentInput < InputPhase.Ended) {\n        this.setState({ currentInput: this.state.currentInput + 1 });\n      }\n    };\n\n    const reject = () => {\n      animate(\"shake\", this.state.inputRef.current!, 500);\n    };\n\n    const triggerDelay = async () => {\n      if (ms) {\n        console.log(true);\n        this.setState({\n          inputTransitioning: true,\n        });\n\n        await delay(ms);\n\n        console.log(false);\n        this.setState({\n          inputTransitioning: false,\n        });\n      }\n    };\n\n    switch (this.state.currentInput) {\n      case InputPhase.Name:\n        if (this.state.name !== \"\") {\n          await triggerDelay();\n          triggerNextInputPhase();\n        } else {\n          reject();\n        }\n\n        break;\n\n      case InputPhase.LobbyID:\n        if (this.state.lobbyIDInput !== \"\") {\n          this.connection\n            .send<\"req\", \"lobby_join\">(\n              {\n                method: \"req\",\n                type: \"lobby_join\",\n                payload: {\n                  lobbyID: Number(this.state.lobbyIDInput),\n                  name: this.state.name,\n                },\n              },\n              10000\n            )\n            .then(async (res) => {\n              if (res) {\n                if (res.lobbyInfo) {\n                  this.setState({ lobbyInfo: res.lobbyInfo });\n                  await triggerDelay();\n                  triggerNextInputPhase();\n                } else {\n                  this.setState({\n                    error: {\n                      occurred: true,\n                      message: ErrorMessage.MissingLobby,\n                    },\n                  });\n                  console.log(res.error);\n                }\n              } else {\n                this.setState({\n                  error: { occurred: true, message: ErrorMessage.TimedOut },\n                });\n              }\n            });\n        } else {\n          reject();\n        }\n        break;\n\n      default:\n        break;\n    }\n  }\n\n  render() {\n    const { socketURL, ...rest } = this.props;\n\n    return (\n      <div {...rest}>\n        <div className={styles[\"lobby-container\"]}>\n          <Link to=\"/\">\n            <button id={styles.back} className=\"box-shadow\">\n              <span className={styles[\"arrow-left\"]} />\n              <span>Back</span>\n            </button>\n          </Link>\n          <button\n            style={{\n              position: \"absolute\",\n              zIndex: 1,\n              bottom: 0,\n              right: 0,\n              color: \"white\",\n            }}\n            onClick={() =>\n              this.setState({\n                lobbyInfo: this.state.lobbyInfo\n                  ? undefined\n                  : {\n                      id: 0,\n                      players: [\n                        this.state.name,\n                        \"Test1\",\n                        \"Test2\",\n                        \"Test3\",\n                        \"Test4\",\n                        \"Test5\",\n                        \"Test6\",\n                        \"Test7\",\n                        \"Test8\",\n                        \"Test9\",\n                        \"Test10\",\n                        \"Test11\",\n                        \"Test12\",\n                      ],\n                    },\n              })\n            }\n          >\n            Test\n          </button>\n          <CSSTransition\n            in={this.state.lobbyInfo !== undefined}\n            timeout={500}\n            classNames={{\n              enter: styles[\"background-top-enter\"],\n              enterActive: styles[\"background-top-enter-active\"],\n              enterDone: styles[\"background-top-enter-done\"],\n              exit: styles[\"background-top-exit\"],\n              exitActive: styles[\"background-top-exit-active\"],\n              exitDone: styles[\"background-top-exit-done\"],\n            }}\n          >\n            <div\n              id={\n                this.state.transitionedToLobby\n                  ? styles.background\n                  : styles[\"background-top\"]\n              }\n            >\n              <CSSTransition\n                in={this.state.lobbyInfo === undefined}\n                timeout={500}\n                classNames={{\n                  enter: styles[\"title-container-enter\"],\n                  enterActive: styles[\"title-container-enter-active\"],\n                  enterDone: styles[\"title-container-enter-done\"],\n                  exit: styles[\"title-container-exit\"],\n                  exitActive: styles[\"title-container-exit-active\"],\n                  exitDone: styles[\"title-container-exit-done\"],\n                }}\n                onExited={() => this.setState({ transitionedToLobby: true })}\n                mountOnEnter\n                unmountOnExit\n              >\n                {/* <div id={styles[\"title-container\"]}>\n                  <h1 className=\"text-shadow\">Nako</h1>\n                  <h5 className=\"text-shadow\">for students</h5>\n                </div> */}\n                <Logo id={styles[\"title-container\"]} role=\"student\" />\n              </CSSTransition>\n              <CSSTransition\n                in={\n                  this.state.transitionedToLobby &&\n                  this.state.lobbyInfo !== undefined\n                }\n                timeout={500}\n                classNames={{\n                  enter: styles[\"player-list-container-enter\"],\n                  enterActive: styles[\"player-list-container-enter-active\"],\n                  enterDone: styles[\"player-list-container-enter-done\"],\n                  exit: styles[\"player-list-container-exit\"],\n                  exitActive: styles[\"player-list-container-exit-active\"],\n                  exitDone: styles[\"player-list-container-exit-done\"],\n                }}\n                onExit={() => this.setState({ transitionedToLobby: false })}\n                mountOnEnter\n                unmountOnExit\n              >\n                <div id={styles[\"player-list-container\"]}>\n                  <h3>You are playing with:</h3>\n                  <div id={styles[\"player-list\"]}>\n                    {this.state.lobbyInfo !== undefined\n                      ? this.state.lobbyInfo!.players.map((player, i) => (\n                          <p key={i}>{player}</p>\n                        ))\n                      : null}\n                  </div>\n                </div>\n              </CSSTransition>\n            </div>\n          </CSSTransition>\n          <CSSTransition\n            in={this.state.lobbyInfo === undefined}\n            timeout={500}\n            classNames={{\n              enter: styles[\"background-bottom-enter\"],\n              enterActive: styles[\"background-bottom-enter-active\"],\n              enterDone: styles[\"background-bottom-enter-done\"],\n              exit: styles[\"background-bottom-exit\"],\n              exitActive: styles[\"background-bottom-exit-active\"],\n              exitDone: styles[\"background-bottom-exit-done\"],\n            }}\n            unmountOnExit\n          >\n            <div id={styles[\"background-bottom\"]} className=\"box-shadow-inner\">\n              <form\n                id={styles[\"input-container\"]}\n                onSubmit={(e) => this.onFormSubmitHandler(e, 600)}\n              >\n                <CSSTransition\n                  in={!this.state.inputTransitioning}\n                  timeout={500}\n                  classNames=\"fade-rtl\"\n                >\n                  <input\n                    ref={this.state.inputRef}\n                    id={styles.input}\n                    {...this.state.inputParams[this.state.currentInput]}\n                  />\n                </CSSTransition>\n                {this.state.error.occurred ? (\n                  <p className=\"error\">{this.state.error.message}</p>\n                ) : null}\n                <button id={styles.submit} className=\"box-shadow\" type=\"submit\">\n                  Enter\n                </button>\n              </form>\n            </div>\n          </CSSTransition>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default Lobby;\n"]},"metadata":{},"sourceType":"module"}